<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Football Admin Dashboard</title>

<style>
body{
 background:#020617;
 color:white;
 font-family:Arial;
 padding:15px;
}

h2{margin-top:30px}

input,select,button{
 width:100%;
 padding:8px;
 margin:6px 0;
 border-radius:6px;
 border:none;
}

button{
 background:#1eb0a0;
 color:black;
 font-weight:bold;
}

.card{
 background:#0f172a;
 padding:12px;
 border-radius:10px;
 margin-bottom:15px;
}

.match{
 border-bottom:1px solid #222;
 padding:8px 0;
}
</style>
</head>

<body>

<h1>⚽ Football Admin Dashboard</h1>

<!-- Add League -->
<div class="card">
<h2>Add League</h2>
<input id="league_name" placeholder="League Name">
<input id="league_logo" placeholder="League Logo URL">
<input id="league_link" placeholder="League Link">
<button onclick="addLeague()">Add League</button>
</div>

<!-- Add Team -->
<div class="card">
<h2>Add Team</h2>
<input id="team_name" placeholder="Team Name">
<input id="team_logo" placeholder="Team Logo URL">
<input id="team_link" placeholder="Team Link">
<button onclick="addTeam()">Add Team</button>
</div>

<!-- Add Match -->
<div class="card">
<h2>Add Match</h2>
<input id="league_id" placeholder="League ID">
<input id="home_team" placeholder="Home Team ID">
<input id="away_team" placeholder="Away Team ID">
<input id="match_time" placeholder="2026-01-28T20:00:00Z">
<input id="stream" placeholder="Stream Link">
<button onclick="addMatch()">Add Match</button>
</div>

<!-- Update Match -->
<div class="card">
<h2>Update Match</h2>
<input id="match_id" placeholder="Match ID">
<input id="home_score" placeholder="Home Score">
<input id="away_score" placeholder="Away Score">
<input id="new_stream" placeholder="New Stream Link">
<button onclick="updateMatch()">Update Match</button>
</div>

<!-- Matches -->
<div class="card">
<h2>Matches</h2>
<div id="matches">Loading...</div>
</div>

<script>

const API = "https://api-key-8vox.onrender.com";

function post(url,data){
 return fetch(API+url,{
  method:"POST",
  headers:{'Content-Type':'application/json'},
  body:JSON.stringify(data)
 }).then(r=>r.json());
}

function put(url,data){
 return fetch(API+url,{
  method:"PUT",
  headers:{'Content-Type':'application/json'},
  body:JSON.stringify(data)
 }).then(r=>r.json());
}

/* ---------- Actions ---------- */

function addLeague(){
 post("/admin/league",{
  name:league_name.value,
  logo:league_logo.value,
  link:league_link.value
 }).then(alertDone);
}

function addTeam(){
 post("/admin/team",{
  name:team_name.value,
  logo:team_logo.value,
  link:team_link.value
 }).then(alertDone);
}

function addMatch(){
 post("/admin/match",{
  league_id:+league_id.value,
  home_team:+home_team.value,
  away_team:+away_team.value,
  match_time:match_time.value,
  stream:stream.value
 }).then(alertDone);
}

function updateMatch(){
 put("/admin/match/"+match_id.value,{
  home_score:+home_score.value,
  away_score:+away_score.value,
  stream:new_stream.value
 }).then(alertDone);
}

function alertDone(){
 alert("Done ✔");
 loadMatches();
}

/* ---------- Load Matches ---------- */

function loadMatches(){
 fetch(API+"/matches")
 .then(r=>r.json())
 .then(d=>{
  matches.innerHTML="";
  d.results.forEach(m=>{
   matches.innerHTML+=`
   <div class="match">
    #${m.id} | ${m.home.name} vs ${m.away.name}<br>
    ${m.status} | ${m.score.home ?? "-"}:${m.score.away ?? "-"}
   </div>`;
  });
 });
}

loadMatches();

</script>

</body>
</html>
