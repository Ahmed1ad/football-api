<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Football Admin</title>

<style>
body{
margin:0;
font-family:system-ui;
background:#050b18;
color:#fff;
}

header{
padding:15px;
background:#0b1228;
text-align:center;
font-size:20px;
font-weight:bold;
}

.grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
gap:15px;
padding:15px;
}

.card{
background:#0e1830;
border-radius:12px;
padding:12px;
box-shadow:0 0 15px #000;
}

h3{margin:5px 0}

input,select{
width:100%;
padding:8px;
border-radius:6px;
border:none;
margin:4px 0;
background:#091226;
color:white;
}

button{
padding:7px 12px;
border:none;
border-radius:6px;
background:#1eb0a0;
font-weight:bold;
margin-top:5px;
}

table{
width:100%;
font-size:13px;
border-collapse:collapse;
}

td{
border-bottom:1px solid #222;
padding:5px;
}

.toast{
position:fixed;
bottom:20px;
right:20px;
background:#1eb0a0;
color:black;
padding:10px 15px;
border-radius:8px;
display:none;
}
</style>
</head>

<body>

<header>âš½ Football Admin PRO</header>

<div class="grid">

<div class="card">
<h3>Add League</h3>
<input id="lname" placeholder="Name">
<input id="llogo" placeholder="Logo URL">
<button onclick="addLeague()">Add</button>
</div>

<div class="card">
<h3>Add Team</h3>
<input id="tname" placeholder="Team name">
<input id="tlogo" placeholder="Logo URL">
<button onclick="addTeam()">Add</button>
</div>

<div class="card">
<h3>Add Match</h3>
<input id="league" placeholder="League ID">
<input id="home" placeholder="Home Team ID">
<input id="away" placeholder="Away Team ID">
<input id="time" placeholder="2026-01-27T21:00:00Z">
<button onclick="addMatch()">Add</button>
</div>

</div>

<div class="grid">

<div class="card">
<h3>Teams (edit)</h3>
<table id="teams"></table>
</div>

<div class="card">
<select id="filter" onchange="load()"></select>
<h3>Matches</h3>
<table id="matches"></table>
</div>

</div>

<div id="toast" class="toast"></div>

<script>
const API="";

function toast(t){
toastEl.innerText=t;
toastEl.style.display="block";
setTimeout(()=>toastEl.style.display="none",2000);
}

async function addLeague(){
await fetch("/admin/league",{method:"POST",headers:{'Content-Type':'application/json'},
body:JSON.stringify({name:lname.value,logo:llogo.value})});
toast("League Added");
}

async function addTeam(){
await fetch("/admin/team",{method:"POST",headers:{'Content-Type':'application/json'},
body:JSON.stringify({name:tname.value,logo:tlogo.value})});
toast("Team Added");
}

async function addMatch(){
await fetch("/admin/match",{method:"POST",headers:{'Content-Type':'application/json'},
body:JSON.stringify({
league_id:league.value,
home_team:home.value,
away_team:away.value,
match_time:time.value
})});
toast("Match Added");
}

async function updateTeam(id){
await fetch("/admin/team/"+id,{
method:"PUT",
headers:{'Content-Type':'application/json'},
body:JSON.stringify({
name:document.getElementById("tn"+id).value,
logo:document.getElementById("tl"+id).value
})
});
toast("Team Updated");
}

async function delMatch(id){
if(confirm("Delete?")){
await fetch("/admin/match/"+id,{method:"DELETE"});
toast("Deleted");
}
}

async function saveMatch(id){
await fetch("/admin/match/"+id,{
method:"PUT",
headers:{'Content-Type':'application/json'},
body:JSON.stringify({
home_score:document.getElementById("hs"+id).value,
away_score:document.getElementById("as"+id).value,
match_time:document.getElementById("mt"+id).value,
stream:document.getElementById("st"+id).value
})
});
toast("Match Updated");
}

async function load(){

let leagues=await fetch("/leagues").then(r=>r.json());
filter.innerHTML="<option value=''>All leagues</option>"+leagues.map(l=>`<option value=${l.id}>${l.name}</option>`);

let teams=await fetch("/teams").then(r=>r.json());
teamsEl.innerHTML="";
teams.forEach(t=>{
teamsEl.innerHTML+=`
<tr>
<td>${t.id}</td>
<td><input id=tn${t.id} value="${t.name}"></td>
<td><input id=tl${t.id} value="${t.logo||""}"></td>
<td><button onclick="updateTeam(${t.id})">ðŸ’¾</button></td>
</tr>`;
});

let m=await fetch("/matches").then(r=>r.json());
let list=m.results.filter(x=>!filter.value||x.league.id==filter.value);

matchesEl.innerHTML="";
list.forEach(x=>{
matchesEl.innerHTML+=`
<tr>
<td>${x.id}</td>
<td>${x.home.name} vs ${x.away.name}</td>

<td>
<input id=hs${x.id} value="${x.score.home||0}" size=1>
<input id=as${x.id} value="${x.score.away||0}" size=1>
</td>

<td>
<input id=mt${x.id} value="${x.match_time}">
</td>

<td>
<input id=st${x.id} value="${x.stream||""}">
</td>

<td>
<button onclick="saveMatch(${x.id})">ðŸ’¾</button>
<button onclick="delMatch(${x.id})">ðŸ—‘</button>
</td>
</tr>`;
});
}

const teamsEl=document.getElementById("teams");
const matchesEl=document.getElementById("matches");
const toastEl=document.getElementById("toast");

load();
setInterval(load,60000);
</script>

  
</body>
</html>
