<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù…</title>

<style>
:root{
--bg:#070d1a;
--card:#0f1a33;
--accent:#1eb0a0;
--danger:#ef4444;
--muted:#9aa4b2;
}

*{box-sizing:border-box}

body{
margin:0;
font-family:system-ui;
background:linear-gradient(180deg,#050b18,#070d1a);
color:white;
}

header{
padding:16px;
background:#0b1228;
text-align:center;
font-size:20px;
font-weight:bold;
}

.container{
padding:16px;
display:grid;
grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
gap:16px;
}

.card{
background:var(--card);
border-radius:14px;
padding:14px;
box-shadow:0 10px 25px rgba(0,0,0,.35);
}

.card h3{margin:0 0 8px}

.row{
display:grid;
grid-template-columns:1fr 1fr;
gap:8px;
}

input,select{
width:100%;
padding:9px;
border-radius:8px;
border:1px solid #1b2548;
background:#0a1330;
color:white;
}

button{
padding:9px;
border-radius:8px;
border:none;
background:var(--accent);
font-weight:bold;
cursor:pointer;
}

button.danger{
background:transparent;
color:#fecaca;
border:1px solid #7f1d1d;
}

.table-wrap{
max-height:340px;
overflow:auto;
border:1px solid #1b2548;
border-radius:10px;
}

table{
width:100%;
border-collapse:collapse;
font-size:13px;
text-align:center;
}

th,td{
padding:8px;
border-bottom:1px solid #1b2548;
}

th{
background:#0b1433;
position:sticky;
top:0;
}

.badge{
padding:3px 8px;
border-radius:999px;
font-size:11px;
}

.badge.live{background:#7f1d1d}
.badge.soon{background:#854d0e}
.badge.break{background:#1e3a8a}
.badge.ended{background:#14532d}

.logo{
width:24px;
height:24px;
object-fit:contain;
}

.actions{
display:flex;
gap:6px;
justify-content:center;
}

.toast{
position:fixed;
bottom:20px;
left:20px;
background:var(--accent);
color:black;
padding:10px 14px;
border-radius:10px;
display:none;
}
</style>
</head>

<body>

<header>âš½ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù…</header>

<div class="container">

<div class="card">
<h3>Ø¥Ø¶Ø§ÙØ© Ø¨Ø·ÙˆÙ„Ø©</h3>
<input id="l_name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©">
<input id="l_logo" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ø´Ø¹Ø§Ø±">
<input id="l_link" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹">
<button onclick="addLeague()">Ø¥Ø¶Ø§ÙØ©</button>
</div>

<div class="card">
<h3>Ø¥Ø¶Ø§ÙØ© ÙØ±ÙŠÙ‚</h3>
<input id="t_name" placeholder="Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚">
<input id="t_logo" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ø´Ø¹Ø§Ø±">
<input id="t_link" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹">
<button onclick="addTeam()">Ø¥Ø¶Ø§ÙØ©</button>
</div>

<div class="card">
<h3>Ø¥Ø¶Ø§ÙØ© Ù…Ø¨Ø§Ø±Ø§Ø©</h3>
<div class="row">
<input id="m_league" placeholder="ID Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©">
<input id="m_time" placeholder="2026-01-27T21:00:00Z">
</div>
<div class="row">
<input id="m_home" placeholder="ID ØµØ§Ø­Ø¨ Ø§Ù„Ø£Ø±Ø¶">
<input id="m_away" placeholder="ID Ø§Ù„Ø¶ÙŠÙ">
</div>
<input id="m_stream" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ø¨Ø«">
<button onclick="addMatch()">Ø¥Ø¶Ø§ÙØ©</button>
</div>

</div>

<div class="container">

<div class="card">
<h3>Ø§Ù„Ø¨Ø·ÙˆÙ„Ø§Øª</h3>
<div class="table-wrap">
<table id="leaguesTbl">
<thead><tr><th>ID</th><th>Ø´Ø¹Ø§Ø±</th><th>Ø§Ø³Ù…</th><th>Ø­Ø°Ù</th></tr></thead>
<tbody></tbody>
</table>
</div>
</div>

<div class="card">
<h3>Ø§Ù„ÙØ±Ù‚</h3>
<div class="table-wrap">
<table id="teamsTbl">
<thead><tr><th>ID</th><th>Ø§Ø³Ù…</th><th>Ø´Ø¹Ø§Ø±</th><th>Ø­ÙØ¸</th><th>Ø­Ø°Ù</th></tr></thead>
<tbody></tbody>
</table>
</div>
</div>

<div class="card">
<div style="display:flex;gap:8px;margin-bottom:6px">
<select id="leagueFilter" onchange="loadAll()"></select>
<button onclick="loadAll()">ğŸ”„ ØªØ­Ø¯ÙŠØ«</button>
</div>

<div class="table-wrap">
<table id="matchesTbl">
<thead>
<tr>
<th>ID</th><th>Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
<th>Ø§Ù„Ù†ØªÙŠØ¬Ø©</th><th>Ø§Ù„ÙˆÙ‚Øª</th><th>Ø§Ù„Ø±Ø§Ø¨Ø·</th><th>Ø­ÙØ¸</th><th>Ø­Ø°Ù</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</div>

</div>

<div id="toast" class="toast"></div>

<script>
const ADMIN_KEY="123456"; // ØºÙŠÙ‘Ø±Ù‡Ø§
const H=()=>({"Content-Type":"application/json","x-api-key":ADMIN_KEY});

function toast(t){toastEl.innerText=t;toastEl.style.display="block";setTimeout(()=>toastEl.style.display="none",2000);}

async function api(u,o={}){const r=await fetch(u,o);if(!r.ok)throw "";return r.json();}

async function addLeague(){
await api("/admin/league",{method:"POST",headers:H(),body:JSON.stringify({name:l_name.value,logo:l_logo.value,link:l_link.value})});
toast("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©");loadAll();
}

async function delLeague(id){
if(!confirm("Ø­Ø°Ù Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©ØŸ"))return;
await api("/admin/league/"+id,{method:"DELETE",headers:H()});
toast("ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©");loadAll();
}

async function addTeam(){
await api("/admin/team",{method:"POST",headers:H(),body:JSON.stringify({name:t_name.value,logo:t_logo.value,link:t_link.value})});
toast("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ±ÙŠÙ‚");loadAll();
}

async function saveTeam(id){
await api("/admin/team/"+id,{method:"PUT",headers:H(),body:JSON.stringify({name:document.getElementById("tn"+id).value,logo:document.getElementById("tl"+id).value})});
toast("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ±ÙŠÙ‚");
}

async function delTeam(id){
if(!confirm("Ø­Ø°Ù Ø§Ù„ÙØ±ÙŠÙ‚ØŸ"))return;
await api("/admin/team/"+id,{method:"DELETE",headers:H()});
toast("ØªÙ… Ø­Ø°Ù Ø§Ù„ÙØ±ÙŠÙ‚");loadAll();
}

async function addMatch(){
await api("/admin/match",{method:"POST",headers:H(),body:JSON.stringify({
league_id:+m_league.value,
home_team:+m_home.value,
away_team:+m_away.value,
match_time:m_time.value,
stream:m_stream.value
})});
toast("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©");loadAll();
}

async function saveMatch(id){
await api("/admin/match/"+id,{method:"PUT",headers:H(),body:JSON.stringify({
home_score:+document.getElementById("hs"+id).value,
away_score:+document.getElementById("as"+id).value,
match_time:document.getElementById("mt"+id).value,
stream:document.getElementById("st"+id).value
})});
toast("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©");
}

async function delMatch(id){
if(!confirm("Ø­Ø°Ù Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©ØŸ"))return;
await api("/admin/match/"+id,{method:"DELETE",headers:H()});
toast("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©");loadAll();
}

async function loadAll(){
const leagues=await api("/leagues");
const teams=await api("/teams");
const matches=await api("/matches");

leagueFilter.innerHTML=`<option value="">ÙƒÙ„ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø§Øª</option>`+leagues.map(l=>`<option value=${l.id}>${l.name}</option>`).join("");

leaguesTbl.querySelector("tbody").innerHTML=leagues.map(l=>`
<tr><td>${l.id}</td><td><img class=logo src="${l.logo||""}"></td><td>${l.name}</td>
<td><button class=danger onclick="delLeague(${l.id})">Ø­Ø°Ù</button></td></tr>`).join("");

teamsTbl.querySelector("tbody").innerHTML=teams.map(t=>`
<tr><td>${t.id}</td>
<td><input id=tn${t.id} value="${t.name}"></td>
<td><input id=tl${t.id} value="${t.logo||""}"></td>
<td><button onclick="saveTeam(${t.id})">Ø­ÙØ¸</button></td>
<td><button class=danger onclick="delTeam(${t.id})">Ø­Ø°Ù</button></td></tr>`).join("");

const sel=leagueFilter.value;
const list=matches.results.filter(m=>!sel||m.league.id==sel);

matchesTbl.querySelector("tbody").innerHTML=list.map(m=>`
<tr>
<td>${m.id}</td>
<td>${m.home.name} Ã— ${m.away.name}</td>
<td><span class="badge ${m.status}">${m.status} ${m.phase||""}</span></td>
<td>
<input id=hs${m.id} value="${m.score.home??0}" style="width:40px"> :
<input id=as${m.id} value="${m.score.away??0}" style="width:40px">
<small>${m.minute??""}'</small>
</td>
<td><input id=mt${m.id} value="${m.match_time}"></td>
<td><input id=st${m.id} value="${m.stream||""}"></td>
<td class=actions><button onclick="saveMatch(${m.id})">Ø­ÙØ¸</button></td>
<td class=actions><button class=danger onclick="delMatch(${m.id})">Ø­Ø°Ù</button></td>
</tr>`).join("");
}

const toastEl=document.getElementById("toast");
loadAll();
setInterval(loadAll,5000);
</script>

</body>
</html>
